# luna_pinyin_simp.custom.yaml
#
# è¾“å…¥æ–¹æ¡ˆã€Œæœ™æœˆæ‹¼éŸ³Â·ç®€åŒ–å­—ã€é…ç½®

patch:
  switches:
    - name: ascii_mode
      reset: 0
      states: ["ä¸­æ–‡", "è¥¿æ–‡"]
    - name: full_shape
      states: ["åŠè§’", "å…¨è§’"]
    - name: zh_simp                      # ç¹ç®€è½¬æ¢
      reset: 1
      states: ["ç¹ä½“", "ç®€ä½“"]
    - name: show_emoji
      reset: 0                           # é»˜è®¤ä¸æ˜¾ç¤º emoji
      states: [ "ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F" ]

  engine/filters:
      - simplifier
      - simplifier@emoji_conversion
      - uniquifier
      - single_char_filter

  emoji_conversion:
    opencc_config: emoji.json
    option_name: show_emoji
    tags: abc

  # https://github.com/rime/librime/issues/72
  "speller/algebra/@before 0": xform/^([b-df-hj-np-tv-z])$/$1_/

  # åŠ è½½ easy_en ä¾èµ–
  "schema/dependencies/@1": easy_en
  # è½½å…¥ç¿»è¯‘è‹±æ–‡çš„ç è¡¨ç¿»è¯‘å™¨ï¼Œå–åä¸º english
  "engine/translators/@4": table_translator@english
  # english ç¿»è¯‘å™¨è®¾å®šé¡¹
  english:
    dictionary: easy_en
    spelling_hints: 9
    enable_completion: false      # æ˜¯å¦å¯ç”¨è‹±æ–‡è¾“å…¥è”æƒ³è¡¥å…¨
    enable_sentence: false
    initial_quality: -2           # è°ƒæ•´è‹±æ–‡å€™é€‰è¯çš„ä½ç½®ï¼Œå¦‚ -3 ä¼šæ›´é å

  # è½½å…¥è‡ªå®šä¹‰è¯å…¸
  "translator/dictionary": luna_pinyin.my
  # æ‹¼å†™çº é”™
  "translator/enable_correction": true

  # ç¬¦å·å¿«é€Ÿè¾“å…¥å’Œéƒ¨åˆ†ç¬¦å·çš„å¿«é€Ÿä¸Šå±
  punctuator:
    # import_preset: symbols
    symbols:
      # åˆ†æ•°
      "/fs": [Â½, â€°, Â¼, â…“, â…”, Â¾, â…’ ]
      # ç”µè„‘
      "/dn": [âŒ˜, âŒ¥, â‡§, âŒƒ, â‹, â‡ª, ï£¿, âŒ«, âŒ¦, â†©ï¸, â, â†‘, â†“, â†, â†’, â†–, â†˜, â‡Ÿ, â‡]
      # ç¬¦å·
      "/fh": [Â©, Â®, â„—, â“˜, â„ , â„¢, â„¡, â¡, â™‚, â™€, â˜‰, â˜Š, â˜‹, â˜Œ, â˜, â˜, â˜‘ï¸, â˜’, â˜œ, â˜, â˜, â˜Ÿ, âœ, âœ„, â™», âš, âš‘, âš , âœ”, âœ˜]
      # éº»å°†
      "/mj": [ğŸ€€, ğŸ€, ğŸ€‚, ğŸ€ƒ, ğŸ€„, ğŸ€…, ğŸ€†, ğŸ€‡, ğŸ€ˆ, ğŸ€‰, ğŸ€Š, ğŸ€‹, ğŸ€Œ, ğŸ€, ğŸ€, ğŸ€, ğŸ€, ğŸ€‘, ğŸ€’, ğŸ€“, ğŸ€”, ğŸ€•, ğŸ€–, ğŸ€—, ğŸ€˜, ğŸ€™, ğŸ€š, ğŸ€›, ğŸ€œ, ğŸ€, ğŸ€, ğŸ€Ÿ, ğŸ€ , ğŸ€¡, ğŸ€¢, ğŸ€£, ğŸ€¤, ğŸ€¥, ğŸ€¦, ğŸ€§, ğŸ€¨, ğŸ€©, ğŸ€ª, ğŸ€« ]
      # æ˜Ÿå·
      "/xh": [ï¼Š, Ã—, âœ±, â˜…, â˜†, âœ©, âœ§, â‹, âŠ, â‰, âˆ, â…, âœ¿, âœ²]
      # æ—¥è¯­
      "/jp": [ã®]
      # æ•°å­¦
      '/sx': [ Â±, Ã·, Ã—, âˆˆ, âˆ, âˆ‘, ï¼, ï¼‹, ï¼œ, â‰®, ï¼, â‰ , ï¼, â‰¯, âˆ•, âˆš, âˆ, âˆ, âˆŸ, âˆ , âˆ¥, âˆ§, âˆ¨, âˆ©, âˆª, âˆ«, âˆ®, âˆ´, âˆµ, âˆ·, âˆ½, â‰ˆ, â‰Œ, â‰’, â‰¡, â‰¤, â‰¥, â‰¦, â‰§, âŠ•, âŠ™, âŠ¥, âŠ¿, ã‘, ã’ ]
    # commit - ç›´æ¥ä¸Šå±æŒ‡å®šç¬¦å·
    # [...]  - é€‰æ‹©
    # pair   - æˆå¯¹ç¬¦å·
    # x      - ç›´æ¥è¾“å…¥
    # ä¸æ¸…æ¥šè¿™ä¸ªé…ç½®é¡¹ä½œç”¨
    # full_shape:
    #
    # ä¸­æ–‡è¾“å…¥æ¨¡å¼ä¸‹ï¼Œç¬¦å·å¯¹åº”çš„å­—ç¬¦
    # ç®€å•æ¥è¯´å°±æ˜¯ä¸­æ–‡è¾“å…¥æ¨¡å¼ä¸‹ï¼Œé»˜è®¤ä¼šè¾“å…¥å¯¹åº”çš„ ascii å­—ç¬¦
    # ä½†æ˜¯å¯ä»¥é€šè¿‡é…ç½®å°† ascii å­—ç¬¦ä¿®æ”¹ä¸ºå…¶ä»–å­—ç¬¦
    half_shape:
      ',' : { commit: ï¼Œ }
      '.' : { commit: ã€‚ }
      '<' : [ ã€Š, ã€ˆ, Â«, â€¹ ]
      '>' : [ ã€‹, ã€‰, Â», â€º ]
      '/' : [ '/', Ã· ]
      '?' : { commit: ï¼Ÿ }
      ';' : { commit: ï¼› }
      ':' : { commit: ï¼š }
      '''' : { pair: [ 'â€˜', 'â€™' ] }
      '"' : { pair: [ 'â€œ', 'â€' ] }
      '\' : "ã€"
      '`' : [ Â·, ãƒ» ]
      '!' : { commit: ï¼ }
      '@' : [ '@', Â©, Â®, â„— ]
      '^' : { commit: â€¦â€¦ }
      '&' : '&'
      '(' : ï¼ˆ
      ')' : ï¼‰
      '_' : â€”â€”
      '[' : [ ã€Œ, ã€, ã€”, ï¼» ]
      ']' : [ ã€, ã€‘, ã€•, ï¼½ ]
      '{' : [ ã€, ã€–, ï½› ]
      '}' : [ ã€, ã€—, ï½ ]
  # å¿…é¡»è¦è¿™ä¸ªæ‰èƒ½è¾“å…¥ punctuator ç¬¦å·  
  recognizer/patterns/punct: "^/([a-z]+|[0-9]0?)$"

  # æ‹¼å†™ç®—æ³•é…ç½®
  speller/algebra:
    - erase/^xx$/                      # åŸå·²æœ‰é…ç½®
    - abbrev/^([a-z]).+$/$1/
    - abbrev/^([zcs]h).+$/$1/
    - derive/^([nl])ve$/$1ue/
    - derive/^([jqxy])u/$1v/
    - derive/un$/uen/
    - derive/ui$/uei/
    - derive/iu$/iou/
    - derive/([aeiou])ng$/$1gn/
    - derive/([dtngkhrzcs])o(u|ng)$/$1o/
    - derive/ong$/on/
    - derive/ao$/oa/
    - derive/([iu])a(o|ng?)$/a$1$2/

    # æ¨¡ç³ŠéŸ³å®šç¾©
    # éœ€è¦å“ªçµ„å°±åˆªå»è¡Œé¦–çš„ # è™Ÿï¼Œå–®é›™å‘ä»»é¸
    #- derive/^([zcs])h/$1/             # zh, ch, sh => z, c, s
    #- derive/^([zcs])([^h])/$1h$2/     # z, c, s => zh, ch, sh

    #- derive/^n/l/                     # n => l
    #- derive/^l/n/                     # l => n

    # é€™å…©çµ„ä¸€èˆ¬æ˜¯å–®å‘çš„
    #- derive/^r/l/                     # r => l

    #- derive/^ren/yin/                 # ren => yin, reng => ying
    #- derive/^r/y/                     # r => y

    # ä¸‹é¢ hu <=> f é€™çµ„å¯«æ³•è¤‡é›œä¸€äº›ï¼Œåˆ†æƒ…æ³è¨è«–
    #- derive/^hu$/fu/                  # hu => fu
    #- derive/^hong$/feng/              # hong => feng
    #- derive/^hu([in])$/fe$1/          # hui => fei, hun => fen
    #- derive/^hu([ao])/f$1/            # hua => fa, ...

    #- derive/^fu$/hu/                  # fu => hu
    #- derive/^feng$/hong/              # feng => hong
    #- derive/^fe([in])$/hu$1/          # fei => hui, fen => hun
    #- derive/^f([ao])/hu$1/            # fa => hua, ...

    # éŸ»æ¯éƒ¨ä»½
    # - derive/^([bpmf])eng$/$1ong/      # meng = mong, ...
    # - derive/([ei])n$/$1ng/            # en => eng, in => ing
    # - derive/([ei])ng$/$1n/            # eng => en, ing => in

    # æ¨£ä¾‹è¶³å¤ äº†ï¼Œå…¶ä»–è«‹è‡ªå·±ç¸½çµâ€¦â€¦

    # æ¨¡ç³ŠéŸ³å®šç¾©å…ˆæ–¼ç°¡æ‹¼å®šç¾©ï¼Œæ–¹å¯ä»¤ç°¡æ‹¼æ”¯æŒä»¥ä¸Šæ¨¡ç³ŠéŸ³
    # - abbrev/^([a-z]).+$/$1/           # ç°¡æ‹¼ï¼ˆé¦–å­—æ¯ï¼‰
    # - abbrev/^([zcs]h).+$/$1/          # ç°¡æ‹¼ï¼ˆzh, ch, shï¼‰

    # ä»¥ä¸‹æ˜¯ä¸€çµ„å®¹éŒ¯æ‹¼å¯«ï¼Œã€Šæ¼¢èªæ‹¼éŸ³ã€‹æ–¹æ¡ˆä»¥å‰è€…çˆ²æ­£
    # - derive/^([nl])ve$/$1ue/          # nve = nue, lve = lue
    # - derive/^([jqxy])u/$1v/           # ju = jv,
    # - derive/un$/uen/                  # gun = guen,
    # - derive/ui$/uei/                  # gui = guei,
    # - derive/iu$/iou/                  # jiu = jiou,

    # è‡ªå‹•ç³¾æ­£ä¸€äº›å¸¸è¦‹çš„æŒ‰éµéŒ¯èª¤
    # - derive/([aeiou])ng$/$1gn/        # dagn => dang 
    # - derive/([dtngkhrzcs])o(u|ng)$/$1o/  # zho => zhong|zhou
    # - derive/ong$/on/                  # zhonguo => zhong guo
    # - derive/ao$/oa/                   # hoa => hao
    # - derive/ua$/au/                   # shau => shua
    # - derive/([iu])a(o|ng?)$/a$1$2/    # tain => tian
